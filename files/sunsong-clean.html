<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sunsong Cinema - Find Your Film</title>
<meta property="og:title" content="Sunsong Cinema - Find Your Film">
<meta property="og:description" content="What kind of film do you want to see? We find two films for you.">
<meta name="twitter:card" content="summary_large_image">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=Cinzel:wght@400;600&family=DM+Sans:wght@300;400&display=swap" rel="stylesheet">
<style>
:root {
  --black: #080705;
  --warm: #111009;
  --gold: #c8a44a;
  --gold-light: #e5d098;
  --gold-dim: rgba(200,164,74,0.12);
  --cream: #f2ebe0;
  --dim: #635a4f;
  --text: #e0d8cc;
  --border: rgba(200,164,74,0.14);
}
* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; }
body { background: var(--black); color: var(--text); font-family: "DM Sans", sans-serif; font-weight: 300; min-height: 100vh; display: flex; flex-direction: column; }
header { padding: 24px 48px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(200,164,74,0.06); }
.logo { font-family: "Cinzel", serif; font-size: 18px; font-weight: 600; letter-spacing: 0.18em; color: var(--gold); text-decoration: none; }
.logo span { color: var(--cream); font-weight: 400; }
.header-right { display: flex; gap: 20px; }
.header-link { font-size: 11px; letter-spacing: 0.12em; text-transform: uppercase; color: var(--dim); text-decoration: none; transition: color 0.2s; }
.header-link:hover { color: var(--gold); }
main { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 60px 24px; position: relative; overflow: hidden; }
.ambient { position: absolute; inset: 0; background: radial-gradient(ellipse at 30% 60%, rgba(122,58,16,0.12) 0%, transparent 55%), radial-gradient(ellipse at 70% 30%, rgba(200,164,74,0.05) 0%, transparent 50%); pointer-events: none; }
.search-container { position: relative; z-index: 2; width: 100%; max-width: 720px; text-align: center; }
.eyebrow { font-size: 10px; letter-spacing: 0.28em; text-transform: uppercase; color: var(--gold); margin-bottom: 20px; display: flex; align-items: center; justify-content: center; gap: 12px; }
.eyebrow::before, .eyebrow::after { content: ""; width: 30px; height: 1px; background: var(--gold); opacity: 0.4; }
.search-title { font-family: "Cormorant Garamond", serif; font-size: clamp(36px, 5vw, 62px); font-weight: 300; line-height: 1.05; color: var(--cream); margin-bottom: 12px; }
.search-title em { font-style: italic; color: var(--gold-light); }
.search-sub { font-size: 15px; color: var(--dim); line-height: 1.65; margin-bottom: 44px; max-width: 480px; margin-left: auto; margin-right: auto; }
.search-box { background: rgba(255,255,255,0.025); border: 1px solid var(--border); transition: border-color 0.3s; margin-bottom: 16px; }
.search-box:focus-within { border-color: rgba(200,164,74,0.45); box-shadow: 0 0 40px rgba(200,164,74,0.06); }
.search-box textarea { width: 100%; background: transparent; border: none; outline: none; color: var(--text); font-size: 16px; font-family: "Cormorant Garamond", serif; font-style: italic; font-weight: 300; line-height: 1.65; padding: 28px 28px 16px; resize: none; min-height: 120px; display: block; }
.search-box textarea::placeholder { color: rgba(99,90,79,0.5); font-style: italic; }
.box-footer { display: flex; justify-content: space-between; align-items: center; padding: 12px 20px 16px; border-top: 1px solid rgba(200,164,74,0.06); }
.char-count { font-size: 11px; color: var(--dim); }
.search-btn { background: var(--gold); border: none; color: var(--black); padding: 12px 36px; font-family: "DM Sans", sans-serif; font-size: 11px; letter-spacing: 0.16em; text-transform: uppercase; cursor: pointer; transition: all 0.25s; display: flex; align-items: center; gap: 10px; }
.search-btn:hover { background: var(--gold-light); transform: translateY(-1px); }
.search-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
.spinner { width: 14px; height: 14px; border: 2px solid rgba(8,7,5,0.3); border-top-color: var(--black); border-radius: 50%; animation: spin 0.7s linear infinite; display: none; }
.loading .spinner { display: block; }
.loading .btn-text { display: none; }
@keyframes spin { to { transform: rotate(360deg); } }
.suggestions { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; margin-bottom: 52px; }
.sug { font-size: 12px; color: var(--dim); border: 1px solid rgba(200,164,74,0.12); padding: 7px 16px; cursor: pointer; transition: all 0.2s; font-family: "Cormorant Garamond", serif; font-style: italic; background: transparent; }
.sug:hover { border-color: var(--gold); color: var(--gold-light); background: var(--gold-dim); }
.loading-state { display: none; text-align: center; padding: 60px 0; position: relative; z-index: 2; }
.loading-state.visible { display: block; }
.reel { width: 60px; height: 60px; border: 2px solid rgba(200,164,74,0.15); border-top-color: var(--gold); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px; }
.loading-text { font-family: "Cormorant Garamond", serif; font-size: 20px; font-style: italic; color: var(--dim); animation: pulse 1.8s ease-in-out infinite; }
.loading-sub { font-size: 11px; color: rgba(99,90,79,0.5); letter-spacing: 0.1em; margin-top: 8px; text-transform: uppercase; }
@keyframes pulse { 0%, 100% { opacity: 0.4; } 50% { opacity: 1; } }
.error-box { background: rgba(139,30,30,0.1); border: 1px solid rgba(200,50,50,0.2); padding: 20px 24px; margin-bottom: 20px; display: none; position: relative; z-index: 2; max-width: 720px; width: 100%; }
.error-box.visible { display: block; }
.error-title { font-size: 13px; color: #e07070; margin-bottom: 6px; }
.error-text { font-size: 12px; color: var(--dim); line-height: 1.6; }
.results-section { display: none; width: 100%; max-width: 860px; margin: 0 auto; position: relative; z-index: 2; }
.results-section.visible { display: block; }
.results-header { text-align: center; margin-bottom: 40px; }
.results-label { font-size: 10px; letter-spacing: 0.28em; text-transform: uppercase; color: var(--gold); margin-bottom: 12px; display: flex; align-items: center; justify-content: center; gap: 12px; }
.results-label::before, .results-label::after { content: ""; width: 30px; height: 1px; background: var(--gold); opacity: 0.4; }
.results-query { font-family: "Cormorant Garamond", serif; font-size: 18px; font-style: italic; color: rgba(224,216,204,0.45); max-width: 560px; margin: 0 auto; line-height: 1.5; }
.results-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 40px; }
.result-card { background: var(--warm); border: 1px solid var(--border); overflow: hidden; transition: border-color 0.3s, transform 0.3s; animation: cardIn 0.6s ease forwards; opacity: 0; }
.result-card:nth-child(2) { animation-delay: 0.15s; }
.result-card:hover { border-color: rgba(200,164,74,0.35); transform: translateY(-3px); }
@keyframes cardIn { from { opacity: 0; transform: translateY(24px); } to { opacity: 1; transform: translateY(0); } }
.result-poster { aspect-ratio: 16/9; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; }
.poster-sym { font-size: 64px; opacity: 0.07; font-family: "Cormorant Garamond", serif; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; }
.result-num { position: absolute; top: 16px; left: 16px; font-family: "Cinzel", serif; font-size: 11px; letter-spacing: 0.2em; color: var(--gold); background: rgba(8,7,5,0.85); padding: 5px 12px; border: 1px solid rgba(200,164,74,0.25); }
.result-awards { position: absolute; bottom: 14px; left: 14px; display: flex; gap: 5px; flex-wrap: wrap; }
.r-award { font-size: 8px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--gold); border: 1px solid rgba(200,164,74,0.35); padding: 3px 8px; background: rgba(8,7,5,0.85); }
.result-body { padding: 24px; }
.result-title { font-family: "Cormorant Garamond", serif; font-size: 26px; font-weight: 400; color: var(--cream); line-height: 1.15; margin-bottom: 4px; }
.result-orig { font-style: italic; color: var(--gold-light); font-size: 0.8em; display: block; font-family: "Cormorant Garamond", serif; }
.result-meta { font-size: 12px; color: var(--dim); letter-spacing: 0.06em; margin-bottom: 14px; }
.result-why { font-family: "Cormorant Garamond", serif; font-size: 15px; font-style: italic; color: rgba(224,216,204,0.65); line-height: 1.75; border-left: 2px solid rgba(200,164,74,0.22); padding-left: 16px; margin-bottom: 20px; }
.result-platforms { display: flex; flex-direction: column; gap: 7px; margin-bottom: 18px; }
.rp-row { display: flex; justify-content: space-between; align-items: center; padding: 10px 14px; border: 1px solid var(--border); text-decoration: none; transition: all 0.22s; background: rgba(255,255,255,0.01); }
.rp-row:hover { border-color: var(--gold); background: var(--gold-dim); }
.rp-name { font-size: 13px; color: var(--text); }
.rp-right { display: flex; gap: 10px; align-items: center; }
.rp-price { font-size: 11px; color: var(--dim); }
.rp-comm { font-size: 9px; color: var(--gold); border: 1px solid rgba(200,164,74,0.28); padding: 2px 7px; }
.result-cta { width: 100%; background: var(--gold); border: none; color: var(--black); padding: 12px; font-family: "DM Sans", sans-serif; font-size: 11px; letter-spacing: 0.14em; text-transform: uppercase; cursor: pointer; transition: background 0.22s; }
.result-cta:hover { background: var(--gold-light); }
.share-section { border-top: 1px solid var(--border); padding-top: 36px; text-align: center; margin-bottom: 60px; }
.share-title { font-family: "Cormorant Garamond", serif; font-size: 22px; font-weight: 300; color: var(--cream); margin-bottom: 8px; }
.share-sub { font-size: 13px; color: var(--dim); margin-bottom: 24px; }
.share-row { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
.share-btn { display: flex; align-items: center; gap: 9px; padding: 12px 22px; border: 1px solid var(--border); background: transparent; color: var(--text); font-size: 12px; cursor: pointer; transition: all 0.22s; font-family: "DM Sans", sans-serif; text-decoration: none; }
.share-btn:hover { border-color: var(--gold); color: var(--gold); }
.share-btn.primary { background: var(--gold); color: var(--black); border-color: var(--gold); }
.share-btn.primary:hover { background: var(--gold-light); }
.copy-wrap { display: flex; max-width: 500px; margin: 16px auto 0; }
.copy-input { flex: 1; background: rgba(255,255,255,0.02); border: 1px solid var(--border); border-right: none; color: var(--dim); padding: 10px 16px; font-size: 12px; font-family: "DM Sans", sans-serif; outline: none; }
.copy-go { background: rgba(200,164,74,0.12); border: 1px solid rgba(200,164,74,0.3); color: var(--gold); padding: 10px 20px; font-size: 11px; cursor: pointer; font-family: "DM Sans", sans-serif; text-transform: uppercase; transition: all 0.2s; letter-spacing: 0.12em; }
.copy-go:hover { background: rgba(200,164,74,0.2); }
.search-again { text-align: center; margin-bottom: 24px; }
.search-again-btn { background: transparent; border: 1px solid var(--border); color: var(--dim); padding: 10px 28px; font-size: 11px; letter-spacing: 0.14em; text-transform: uppercase; cursor: pointer; font-family: "DM Sans", sans-serif; transition: all 0.2s; }
.search-again-btn:hover { border-color: var(--gold); color: var(--gold); }
.pg1 { background: linear-gradient(160deg, #0a1520, #1a3040, #0d0f20); }
.pg2 { background: linear-gradient(160deg, #1a1208, #3d2b0a, #1a0f0a); }
.pg3 { background: linear-gradient(160deg, #0d1a0d, #122a12, #0a1510); }
.pg4 { background: linear-gradient(160deg, #1a0d0d, #2a1215, #100808); }
.pg5 { background: linear-gradient(160deg, #150d1a, #20122a, #15102a); }
.pg6 { background: linear-gradient(160deg, #0f0f12, #1a1a20, #0a0a0f); }
footer { padding: 28px 48px; border-top: 1px solid rgba(200,164,74,0.06); display: flex; justify-content: space-between; align-items: center; }
.footer-logo { font-family: "Cinzel", serif; font-size: 14px; color: var(--gold); letter-spacing: 0.15em; }
.footer-tag { font-size: 11px; color: var(--dim); font-style: italic; font-family: "Cormorant Garamond", serif; }
.footer-links { display: flex; gap: 24px; }
.footer-links a { font-size: 11px; color: var(--dim); text-decoration: none; transition: color 0.2s; }
.footer-links a:hover { color: var(--gold); }
@media (max-width: 700px) {
  header { padding: 18px 20px; }
  main { padding: 40px 16px; }
  .results-grid { grid-template-columns: 1fr; }
  footer { flex-direction: column; gap: 12px; padding: 24px 20px; text-align: center; }
}
</style>
</head>
<body>

<header>
  <a href="/" class="logo">Sunsong <span>Cinema</span></a>
  <div class="header-right">
    <a href="#" class="header-link">Discover</a>
    <a href="#" class="header-link">About</a>
  </div>
</header>

<main>
  <div class="ambient"></div>

  <div class="error-box" id="errorBox">
    <div class="error-title" id="errorTitle"></div>
    <div class="error-text" id="errorText"></div>
  </div>

  <div class="search-container" id="searchUI">
    <div class="eyebrow">Find Your Film</div>
    <h1 class="search-title">What kind of film<br>do you want to <em>see?</em></h1>
    <p class="search-sub">What are your main criteria for the film you want to watch right now? Romance, politics, subversive, classical, thought-provoking, entertaining?</p>

    <div class="search-box">
      <textarea id="searchInput" maxlength="400" placeholder="I want a slow Japanese film about family, something recent, with a lot of silence. Or: a political documentary from Latin America..."></textarea>
      <div class="box-footer">
        <span class="char-count"><span id="charNum">0</span> / 400</span>
        <button class="search-btn" id="searchBtn">
          <div class="spinner"></div>
          <span class="btn-text">Find My Two Films</span>
        </button>
      </div>
    </div>

    <div class="suggestions" id="suggestions"></div>
  </div>

  <div class="loading-state" id="loadingState">
    <div class="reel"></div>
    <div class="loading-text">Searching through the world's cinema...</div>
    <div class="loading-sub">Matching your criteria to two films</div>
  </div>

  <div class="results-section" id="resultsSection">
    <div class="results-header">
      <div class="results-label">Two Films Matching Your Criteria</div>
      <div class="results-query" id="resultsQuery"></div>
    </div>
    <div class="results-grid" id="resultsGrid"></div>
    <div class="search-again">
      <button class="search-again-btn" id="resetBtn">Search Again With New Criteria</button>
    </div>
    <div class="share-section">
      <div class="share-title">Share this recommendation</div>
      <div class="share-sub">Share these two films with your audience</div>
      <div class="share-row">
        <a href="#" class="share-btn primary" id="shareTwitter" target="_blank">Share on X</a>
        <button class="share-btn" id="shareIG">Copy for Instagram</button>
        <a href="#" class="share-btn" id="shareFB" target="_blank">Share on Facebook</a>
      </div>
      <div class="copy-wrap">
        <input class="copy-input" id="shareUrl" readonly value="https://sunsongcinema.com">
        <button class="copy-go" id="copyBtn">Copy Link</button>
      </div>
    </div>
  </div>
</main>

<footer>
  <div class="footer-logo">SUNSONG CINEMA</div>
  <div class="footer-tag">Cinema is like love - give it, and it is a gift that keeps giving.</div>
  <div class="footer-links">
    <a href="#">Discover</a>
    <a href="#">About</a>
    <a href="#">Partners</a>
  </div>
</footer>

<script>
var API_KEY = "PLACE_YOUR_KEY_HERE";

var PLATFORMS = {
  "MUBI": { price: "EU11/mo", comm: "10%", url: "https://mubi.com" },
  "Criterion Channel": { price: "$12/mo", comm: "8%", url: "https://criterionchannel.com" },
  "Apple TV": { price: "from EU3.99", comm: "7%", url: "https://tv.apple.com" },
  "Amazon Prime": { price: "from EU2.99", comm: "5%", url: "https://primevideo.com" },
  "DAFilms": { price: "Subscription", comm: "10%", url: "https://dafilms.com" },
  "Ovid.tv": { price: "Subscription", comm: "10%", url: "https://ovid.tv" },
  "CatchPlay+": { price: "Subscription", comm: "12%", url: "https://catchplay.com" },
  "JAIHO": { price: "Subscription", comm: "12%", url: "https://jaiho.com" },
  "Fandor": { price: "Subscription", comm: "9%", url: "https://fandor.com" },
  "Vimeo": { price: "from EU3.99", comm: "15%", url: "https://vimeo.com/ondemand" },
  "NFDC Cinemas": { price: "Subscription", comm: "15%", url: "https://nfdcindia.com" },
  "Watcha": { price: "Subscription", comm: "10%", url: "https://watcha.com" },
  "LaCinetek": { price: "from EU3.99", comm: "10%", url: "https://lacinetek.com" },
  "CineMember": { price: "Subscription", comm: "10%", url: "https://cinemember.nl" }
};

var POSTERS = [
  { cls: "pg1", sym: "花" },
  { cls: "pg2", sym: "映" },
  { cls: "pg3", sym: "家" },
  { cls: "pg4", sym: "기" },
  { cls: "pg5", sym: "牯" },
  { cls: "pg6", sym: "A" }
];

var SUGS = [
  "A Korean film, recent, socially critical, not mainstream",
  "Something from Iran or the Middle East, festival quality",
  "A classic I should have seen - black and white",
  "Philosophical, slow cinema, any country, post-2000",
  "A documentary - raw, political, important",
  "Something from Asia I have never heard of, under 2 hours",
  "A film about family that does not sentimentalize",
  "Eastern European, dark, Palme d Or or Golden Bear level"
];

var SYSTEM = "You are the film curator for Sunsong Cinema, a global arthouse platform. Recommend exactly two real existing films matching the user criteria. Respond ONLY with valid JSON in this exact format, no other text before or after: {\"films\":[{\"title\":\"Film Title\",\"original_title\":\"Original\",\"director\":\"Director\",\"country\":\"Country\",\"year\":2000,\"duration\":\"120 min\",\"awards\":[\"Award 1\"],\"why\":\"2-3 sentences why this matches the criteria.\",\"platforms\":[\"MUBI\"]},{\"title\":\"Second Film\",\"original_title\":\"Original\",\"director\":\"Director\",\"country\":\"Country\",\"year\":2005,\"duration\":\"95 min\",\"awards\":[\"Award\"],\"why\":\"Why this matches.\",\"platforms\":[\"Apple TV\"]}]}. Use these platforms: MUBI, Criterion Channel, DAFilms, Apple TV, Amazon Prime, JAIHO, CatchPlay+, Ovid.tv, Fandor, Watcha, LaCinetek, NFDC Cinemas, CineMember. Pick two films from different regions when possible. Only recommend films that genuinely exist.";

var currentFilms = [];

function init() {
  var sugsEl = document.getElementById("suggestions");
  SUGS.forEach(function(s) {
    var btn = document.createElement("button");
    btn.className = "sug";
    btn.textContent = s;
    btn.addEventListener("click", function() {
      document.getElementById("searchInput").value = s;
      document.getElementById("charNum").textContent = s.length;
    });
    sugsEl.appendChild(btn);
  });

  document.getElementById("searchInput").addEventListener("input", function() {
    document.getElementById("charNum").textContent = this.value.length;
  });

  document.getElementById("searchBtn").addEventListener("click", doSearch);
  document.getElementById("resetBtn").addEventListener("click", resetSearch);
  document.getElementById("copyBtn").addEventListener("click", copyLink);
  document.getElementById("shareIG").addEventListener("click", copyIG);
}

function showError(title, text) {
  document.getElementById("errorTitle").textContent = title;
  document.getElementById("errorText").textContent = text;
  document.getElementById("errorBox").classList.add("visible");
}

function hideError() {
  document.getElementById("errorBox").classList.remove("visible");
}

function doSearch() {
  var query = document.getElementById("searchInput").value.trim();
  if (query.length < 5) {
    showError("Please describe what you want to watch", "Tell us more about what kind of film you are looking for.");
    return;
  }

  hideError();

  document.getElementById("searchUI").style.display = "none";
  document.getElementById("resultsSection").classList.remove("visible");
  document.getElementById("loadingState").classList.add("visible");

  var btn = document.getElementById("searchBtn");
  btn.disabled = true;
  btn.classList.add("loading");

  fetch("https://api.anthropic.com/v1/messages", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "x-api-key": API_KEY,
      "anthropic-version": "2023-06-01",
      "anthropic-dangerous-direct-browser-access": "true"
    },
    body: JSON.stringify({
      model: "claude-sonnet-4-20250514",
      max_tokens: 1000,
      system: SYSTEM,
      messages: [{ role: "user", content: query }]
    })
  })
  .then(function(response) {
    if (!response.ok) {
      return response.json().then(function(err) {
        throw new Error(err.error ? err.error.message : "API error " + response.status);
      });
    }
    return response.json();
  })
  .then(function(data) {
    var raw = data.content && data.content[0] ? data.content[0].text : "";
    var clean = raw.replace(/```json/g, "").replace(/```/g, "").trim();
    var parsed = JSON.parse(clean);
    if (!parsed.films || parsed.films.length < 2) {
      throw new Error("Unexpected response. Please try again.");
    }
    currentFilms = parsed.films;
    renderResults(parsed.films, query);
  })
  .catch(function(err) {
    document.getElementById("loadingState").classList.remove("visible");
    document.getElementById("searchUI").style.display = "block";
    showError("Could not get recommendations", err.message);
  })
  .finally(function() {
    btn.disabled = false;
    btn.classList.remove("loading");
  });
}

function renderResults(films, query) {
  document.getElementById("loadingState").classList.remove("visible");

  var q = query.length > 120 ? query.substring(0, 120) + "..." : query;
  document.getElementById("resultsQuery").textContent = q;

  document.getElementById("resultsGrid").innerHTML = films.map(function(f, i) {
    return buildCard(f, i);
  }).join("");

  var enc = encodeURIComponent(query.substring(0, 100));
  var shareUrl = "https://sunsongcinema.com/?q=" + enc;
  document.getElementById("shareUrl").value = shareUrl;

  var tweetText = "My next two films from Sunsong Cinema: 1. " + films[0].title + " 2. " + films[1].title + " Find yours:";
  document.getElementById("shareTwitter").href = "https://twitter.com/intent/tweet?text=" + encodeURIComponent(tweetText) + "&url=" + encodeURIComponent(shareUrl);
  document.getElementById("shareFB").href = "https://www.facebook.com/sharer/sharer.php?u=" + encodeURIComponent(shareUrl);

  document.getElementById("resultsSection").classList.add("visible");
  document.getElementById("resultsSection").scrollIntoView({ behavior: "smooth", block: "start" });
}

function buildCard(film, idx) {
  var poster = POSTERS[idx % POSTERS.length];
  var platforms = (film.platforms || ["MUBI"]).slice(0, 3).map(function(name) {
    var p = PLATFORMS[name] || { price: "Subscription", comm: "10%", url: "#" };
    return '<a href="' + p.url + '" class="rp-row" target="_blank"><span class="rp-name">' + name + '</span><div class="rp-right"><span class="rp-price">' + p.price + '</span><span class="rp-comm">' + p.comm + '</span></div></a>';
  }).join("");

  var awards = (film.awards || []).slice(0, 3).map(function(a) {
    return '<span class="r-award">' + a + '</span>';
  }).join("");

  var orig = (film.original_title && film.original_title !== film.title)
    ? '<span class="result-orig">' + film.original_title + '</span>' : "";

  var firstUrl = film.platforms && PLATFORMS[film.platforms[0]] ? PLATFORMS[film.platforms[0]].url : "#";
  var meta = film.director + " - " + film.country + " - " + film.year + (film.duration ? " - " + film.duration : "");

  return '<div class="result-card">' +
    '<div class="result-poster">' +
    '<div class="poster-sym ' + poster.cls + '">' + poster.sym + '</div>' +
    '<div class="result-num">No. ' + (idx + 1) + '</div>' +
    '<div class="result-awards">' + awards + '</div>' +
    '</div>' +
    '<div class="result-body">' +
    '<div class="result-title">' + film.title + orig + '</div>' +
    '<div class="result-meta">' + meta + '</div>' +
    '<div class="result-why">' + film.why + '</div>' +
    '<div class="result-platforms">' + platforms + '</div>' +
    '<button class="result-cta" onclick="window.open(\'' + firstUrl + '\', \'_blank\')">Watch ' + film.title + ' Now</button>' +
    '</div></div>';
}

function resetSearch() {
  document.getElementById("resultsSection").classList.remove("visible");
  document.getElementById("searchUI").style.display = "block";
  document.getElementById("searchInput").value = "";
  document.getElementById("charNum").textContent = "0";
  currentFilms = [];
  window.scrollTo({ top: 0, behavior: "smooth" });
}

function copyLink() {
  var input = document.getElementById("shareUrl");
  input.select();
  try { navigator.clipboard.writeText(input.value); } catch(e) { document.execCommand("copy"); }
  var btn = document.getElementById("copyBtn");
  btn.textContent = "Copied!";
  setTimeout(function() { btn.textContent = "Copy Link"; }, 2000);
}

function copyIG() {
  if (currentFilms.length < 2) return;
  var text = "Sunsong Cinema found my next films:\n\n1. " + currentFilms[0].title + " (" + currentFilms[0].director + ", " + currentFilms[0].year + ")\n2. " + currentFilms[1].title + " (" + currentFilms[1].director + ", " + currentFilms[1].year + ")\n\nFind yours at sunsongcinema.com\n\n#SunsongCinema #ArtHouse #WorldCinema";
  try { navigator.clipboard.writeText(text); } catch(e) {}
  var btn = document.getElementById("shareIG");
  btn.textContent = "Copied for Instagram!";
  setTimeout(function() { btn.textContent = "Copy for Instagram"; }, 2500);
}

init();
</script>
</body>
</html>
